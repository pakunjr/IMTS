var systemPopup=function(e,a,t){$("#mypopup-container").length>0&&$("#mypopup-container").remove();var n="";switch(e){case"confirm":n="Confirm";break;case"prompt":n="Prompt";break;default:n="Information"}var o=$("body"),i='<div id="mypopup-container"><span id="mypopup-body"><span id="mypopup-title">'+n+'</span><span id="mypopup-content">'+a+'</span><span id="mypopup-buttons"></span></span></div>';o.append(i);var s=$("#mypopup-container"),r=$("#mypopup-body"),p=$("#mypopup-title"),d=$("#mypopup-content"),l=$("#mypopup-buttons");switch(e){case"confirm":l.html('<input id="mypopup-button-yes" class="btn-green" type="button" value="Yes" /><input id="mypopup-button-no" class="btn-red" type="button" value="No" />');break;case"prompt":break;default:l.html('<input id="mypopup-button-ok" type="button" value="Ok" />')}s.css({display:"block",width:$(window).width()+"px",height:$(window).height()+"px",position:"fixed",top:"0px",left:"0px","z-index":"1000",background:"rgba(89, 111, 128, 0.75)","text-align":"center"}),r.css({display:"inline-block","max-width":"350px","margin-top":$(window).height()/2-r.height()/2-40+"px",padding:"10px 15px","border-radius":"3px",border:"1px solid #333",background:"#f7f7f7","box-shadow":"3px 3px 3px rgba(0, 0, 0, 0.2)","text-align":"center"}),p.css({display:"block",padding:"5px 0px","font-family":"Georgia","font-size":"1.1em","text-align":"left","text-transform":"capitalize"}),d.css({display:"block",margin:"0px 0px 5px 0px",padding:"10px 13px","border-radius":"3px",border:"1px solid #ccc",background:"#fff","font-size":"0.9em","text-align":"left"}),l.css({display:"block","text-align":"center"}),$(window).on("resize",function(){s.css({width:$(window).width()+"px",height:$(window).height()+"px"}),r.css({"margin-top":$(window).height()/2-r.height()/2-40+"px"})}),s.fadeIn(50,function(){r.css({"margin-top":$(window).height()/2-r.height()/2-40+"px"}),t()})},myAlert=function(e,a){systemPopup("alert",e,function(){var e=$("#mypopup-container"),t=$("#mypopup-button-ok");t.on("click",function(){e.remove(),a()})})},myConfirm=function(e,a){systemPopup("confirm",e,function(){var e=$("#mypopup-container"),t=$("#mypopup-button-yes"),n=$("#mypopup-button-no");t.on("click",function(){e.remove(),a()}),n.on("click",function(){e.remove()})})},myPrompt=function(e){systemPopup("prompt",e,function(){var e=$("#mypopup-buttons");e.html()})},formFx=function(){$(".datepicker").length>0&&$(".datepicker").each(function(){var e=$(this);0==e.val().length&&e.val("0000-00-00"),e.css({cursor:"pointer"}).prop("readonly",!0).datepicker({showOtherMonths:!0,selectOtherMonths:!1,changeMonth:!0,changeYear:!0,showAnim:"slideDown",dateFormat:"yy-mm-dd"}).on("keyup",function(a){var t=a.keyCode||a.which;("27"==t||27==t)&&(e.val("0000-00-00"),e.blur())})}),$('input[type="text"], textarea, select').length>0&&$('input[type="text"], textarea, select').each(function(){var e=$(this),a=$("body"),t='<div id="form-elements-reader-container"><div id="form-elements-reader-content"></div></div>';e.on("mouseover focusin",function(){var n=e.offset().top,o=e.offset().left;$("#form-elements-reader-container").length>0&&$("#form-elements-reader-container").remove(),a.after(t);var i="";i=e.is("select")?e.find("option:selected").html():e.hasClass("datepicker")?dateToWords(e.val()):e.val(),i=nl2br(i);var s=$("#form-elements-reader-container"),r=$("#form-elements-reader-content"),p=s,d=r;p.css({display:"inline-block","max-width":"250px",padding:"2px",position:"absolute",top:n+e.height()+12+"px",left:o+"px",overflow:"hidden","border-radius":"4px",border:"1px solid #ccc",background:"#fff","box-shadow":"2px 2px 3px rgba(0, 0, 0, 0.15)","text-align":"left","word-wrap":"break-word"}),d.html(i).css({display:"block",padding:"10px 15px","border-radius":"4px",border:"1px solid #ccc","font-size":"0.85em"}),e.on("keyup change",function(){i=e.is("select")?e.find("option:selected").html():e.hasClass("datepicker")?dateToWords(e.val()):e.val(),i=nl2br(i),d.html(i)})}).on("mouseout",function(){$("#form-elements-reader-container").length>0&&$("#form-elements-reader-container").remove()})}),$('input[type="text"], input[type="password"], textarea').length>0&&$('input[type="text"], input[type="password"], textarea').on("keyup",function(e){var a=$(this),t=e.keyCode||e.which;a.hasClass("datepicker")||a.hasClass("search-elements")||("27"==t||27==t)&&a.val("")}),$("textarea").length>0&&$("textarea").each(function(){var e=$(this),a=e.val();e.val(a.replace(/<br \/>/g,""))})},accordionFx=function(){$(".accordion-title").length>0&&$(".accordion-title").each(function(){var e=$(this);if(e.next(".accordion-content").length>0){e.prepend('<span class="accordion-symbol"></span> ').css({display:"block",padding:"8px 13px",border:"1px solid #143a66",background:"#265080","text-shadow":"2px 2px 0px rgba(0, 0, 0, 0.3)","font-size":"1em",color:"#fff",cursor:"pointer"});var a=e.next(".accordion-content"),t=e.find(".accordion-symbol");a.css({padding:"8px 13px",overflow:"auto",border:"1px solid #143a66"}),a.hasClass("accordion-content-default")?(e.css("background-color","#5983b3"),t.html("-")):a.stop(!0,!0).slideUp(0,function(){t.html("+")}),e.addClass("unhighlightable").on("click",function(){a.slideToggle(150,function(){a.is(":visible")?(e.css("background-color","#5983b3"),t.html("-")):(e.css("background-color","#265080"),t.html("+"))})})}})},dataFx=function(){$("#search-box-container").length<1&&$(".data").length>0&&$(".data").each(function(){{var e=$(this),a=e.attr("data-url");e.children("a")}e.hasClass("disabled")||e.addClass("special-hover").on("click",function(){$("a:hover").length<1&&$(".data-more-details:hover").length<1&&(window.location=a)})}),$(".data-more-details").length>0&&$(".data-more-details").each(function(){var e=$(this),a=e.closest("tr"),t='<span class="data-more-details-btn-close">x</span>';e.addClass("unhighlightable").css({display:"block","max-width":$("#main-content").width()+"px","min-width":"200px",margin:"3px 0px 0px -18px",padding:"13px 18px",position:"absolute","z-index":"2",border:"1px solid #ccc","border-radius":"4px",background:"#fff","box-shadow":"2px 2px 3px rgba(0, 0, 0, 0.3)"}).hide(0,function(){e.find(".data-more-details-btn-close").length<1&&e.prepend(t);var a=e.children(".data-more-details-btn-close");a.css({display:"inline-block",width:"15px",height:"18px",padding:"5px 8px",border:"1px solid #ccc",background:"#fff","float":"right","font-size":"12pt","text-align":"center",color:"#333",cursor:"pointer"}).hover(function(){a.css({background:"#ccc","text-shadow":"0px 0px 0px transparent",color:"#fff"})},function(){a.css({background:"#fff",color:"#333"})}).mousedown(function(){a.css({"box-shadow":"2px 2px 2px rgba(0, 0, 0, 0.2) inset"})}).mouseup(function(){a.css({"box-shadow":"0px 0px 0px transparent"})}).click(function(){e.hide(0)})}),a.contextmenu(function(){return!1}).mousedown(function(t){a.css({"box-shadow":"2px 2px 2px rgba(0, 0, 0, 0.2) inset"});var n=t.which;return 3==n||"3"==n?($(".data-more-details:visible").length>0&&$(".data-more-details:visible").hide(0),e.css({top:"auto",left:"auto"}).show(0,function(){$(document).keydown(function(a){var t=a.which;("27"==t||27==t)&&e.hide(0,function(){$(document).unbind("keydown")})}),draggable(e)}),!1):void 0}).mouseup(function(){a.css({"box-shadow":"0px 0px 0px transparent"})})})},embedSearchFx=function(e){var a=$.extend({url:null,o_label:null,o_id:null},e);if(null==a.url&&null==a.o_label&&null==a.o_id)return!1;var t=a.url,n=a.o_label,o=a.o_id,i='<div id="search-box-container"><div id="search-box-content"></div></div>';n.addClass("search-elements"),o.addClass("search-elements"),"0"!=o.val()&&""!=o.val()&&n.addClass("searchbox-readonly"),n.on("focusin keyup",function(){if("None"==n.val()&&n.val(""),"0"==o.val()||""==o.val()){n.prop("readonly",!1).removeClass("searchbox-readonly").on("keyup",function(e){var a=e.which;("27"==a||27==a)&&n.val("")}),$("#search-box-container").length>0&&$("#search-box-container").remove(),$("body").append(i);var e=$("#search-box-container"),a=$("#search-box-content"),s=n.offset().left,r=n.offset().top,p=n.val();e.css({display:"block","max-height":"350px",padding:"3px",overflow:"auto",position:"absolute",top:r+n.height()+12+"px",left:s+"px","border-radius":"3px",border:"1px solid #aaa",background:"#fff"}),$(window).on("resize",function(){var a=n.offset().left,t=n.offset().top;e.css({top:t+n.height()+12+"px",left:a+"px"})}),a.css({display:"block",padding:"10px 15px","border-radius":"3px",border:"1px solid #aaa","font-size":"0.95em","text-align":"left"}),a.load(t+p+"/",function(){$(".data").each(function(){var a=$(this),t=a.attr("data-id"),i=a.attr("data-label");a.addClass("special-hover").css("cursor","pointer").on("click",function(){e.remove(),o.val(t),n.prop("readonly",!0).addClass("searchbox-readonly").val(i)})}),n.on("focusout",function(){e.is(":hover")?e.on("mouseout",function(){n.is(":focus")||e.remove()}):e.remove()})})}else n.prop("readonly",!0),n.hasClass("searchbox-readonly")||n.addClass("searchbox-readonly"),n.on("keyup",function(e){var a=e.keyCode||e.which;("27"==a||27==a)&&(o.val("0"),n.prop("readonly",!1).removeClass("searchbox-readonly").val(""))})})},tablePagination=function(e){var a=$.extend({itemsPerPage:"10",buttonRange:"3"},e);$("table.paged").length>0&&$("table.paged").each(function(){var e=$(this),t=e.children("tbody"),n=e.attr("data-pagination-items-per-page"),o=e.attr("data-pagination-button-range"),i=0,s=0,r="",p=[],d=1,l=1;if("undefined"==typeof n&&(n=a.itemsPerPage),"undefined"==typeof o&&(o=a.buttonRange),i=0==e.children("tr").length?t.children("tr").length:e.children("tr").length,i--,i>n){s=i/n,s=Math.ceil(s);var c=t.children("tr:nth-child(1)");c.wrap("<p></p>"),p[0]=c.parent("p").html(),c.parent("p").remove();for(var h=1;s>=h;h++){r=r+'<span class="unhighlightable pagination-navigation-buttons hidden paged-button" data-page="'+h+'">'+h+"</span>";for(var u="",g=1;n>=g;g++){var b=t.children("tr:nth-child(1)");b.wrap("<p></p>"),u+=b.parent("p").html(),b.parent("p").remove()}p[h]=u}r='<div class="pagination-navigation"><span class="unhighlightable pagination-navigation-buttons" data-page="1">First</span><span class="unhighlightable pagination-navigation-buttons" data-page="prev">Prev</span><span class="unhighlightable pagination-navigation-buttons ellipsis-button" data-page="ellipsis-prev">...</span>'+r+'<span class="unhighlightable pagination-navigation-buttons ellipsis-button" data-page="ellipsis-next">...</span><span class="unhighlightable pagination-navigation-buttons" data-page="next">Next</span><span class="unhighlightable pagination-navigation-buttons" data-page="'+s+'">Last</span></div>';var f='<div class="pagination-statistics">Total no. of data: '+i+"<br />Total no. of pages: "+s+"<br />Items per page: "+n+"</div>";e.before(f+r).after(r);var x=e.prev(".pagination-navigation"),m=e.next(".pagination-navigation"),v=x.add(m);v.children(".pagination-navigation-buttons").each(function(){var e=$(this),a=e.html();t.html(p[d]).prepend(p[0]),v.children('span[data-page="1"]').addClass("currentPage").removeClass("hidden"),v.children('span[data-page="prev"]').addClass("disabled"),v.children('.ellipsis-button[data-page="ellipsis-prev"]:visible').addClass("hidden"),v.children('.paged-button[data-page="'+s+'"]:visible').length>0&&v.children('.ellipsis-button[data-page="ellipsis-next"]:visible').addClass("hidden");for(var n=d;n<=parseInt(d)+parseInt(o);n++)s>=n&&v.children('.paged-button[data-page="'+n+'"]').removeClass("hidden");e.click(function(){if(!$(this).hasClass("disabled")&&!$(this).hasClass("currentPage")){switch(a){case"...":var n=e.attr("data-page"),i=1;"ellipsis-prev"==n?(i=parseInt(parseInt(d)-parseInt(o))-parseInt(o),i--,1>i&&(i=1)):"ellipsis-next"==n&&(i=parseInt(parseInt(d)+parseInt(o))+parseInt(o),i++,i>s&&(i=s)),l=i;break;case"First":l=1;break;case"Prev":l=parseInt(d)-1,1>l&&(l=1);break;case"Next":l=parseInt(d)+1,l>s&&(l=s);break;case"Last":l=s;break;default:l=a}t.html(p[l]).prepend(p[0]),d=l,v.children(".currentPage").removeClass("currentPage"),v.children('span[data-page="'+d+'"]').addClass("currentPage"),1==d?v.children('span[data-page="prev"]').addClass("disabled"):v.children('span[data-page="prev"]').removeClass("disabled"),d==s?v.children('span[data-page="next"]').addClass("disabled"):v.children('span[data-page="next"]').removeClass("disabled"),v.children(".paged-button:visible").addClass("hidden"),v.children('.paged-button[data-page="'+d+'"]').removeClass("hidden");for(var r=d;r>=parseInt(d)-parseInt(o);r--)r>0&&v.children('.paged-button[data-page="'+r+'"]').removeClass("hidden");for(var r=d;r<=parseInt(d)+parseInt(o);r++)s>=r&&v.children('.paged-button[data-page="'+r+'"]').removeClass("hidden");v.children('.paged-button[data-page="'+s+'"]:visible').length>0?v.children('.ellipsis-button[data-page="ellipsis-next"]:visible').addClass("hidden"):v.children('.ellipsis-button[data-page="ellipsis-next"]').removeClass("hidden"),v.children('.paged-button[data-page="1"]:visible').length>0?v.children('.ellipsis-button[data-page="ellipsis-prev"]').addClass("hidden"):v.children('.ellipsis-button[data-page="ellipsis-prev"]').removeClass("hidden"),dataFx()}})})}e.delay(500).slideDown(150)})},nl2br=function(e){return(e+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1<br />$2")},debug=function(e){if($("#system-debug-js").length<1){var a='<div id="system-debug-js">This is for debugging javascript values<span id="system-debug-js-btn-close">x</span><div class="hr-light"></div><div id="system-debug-js-contents"></div></div>';$("body").append(a);var t=$("#system-debug-js"),n=$("#system-debug-js-btn-close"),o=$("#system-debug-js-contents");t.css({display:"inline-block",padding:"13px 18px",position:"fixed",top:"2px",left:"2px","z-index":"999999",border:"1px solid #ccc",background:"#fff","box-shadow":"2px 2px 2px rgba(0, 0, 0, 0.25)","text-align":"left"}),o.css({display:"inline-block",padding:"3px 5px"}),n.css({display:"inline-block",width:"15px",height:"15px",margin:"0px 0px 5px 5px",padding:"8px","float":"right",border:"1px solid rgba(0, 0, 0, 0.5)",background:"rgba(0, 0, 0, 0.35)",cursor:"pointer",color:"#fff","text-align":"center"}).click(function(){t.remove()}),o.html(e)}else{var o=$("#system-debug-js-contents");o.html(e)}},draggable=function(e){e.mousedown(function(a){var t=a.which;if(1==parseInt(t)){var n=parseInt(a.pageX)-parseInt(e.offset().left),o=parseInt(a.pageY)-parseInt(e.offset().top);$(document).mousemove(function(a){var t=parseInt(a.pageX),i=parseInt(a.pageY),s=i-o,r=t-n;e.css({position:"absolute",top:s+"px",left:r+"px"})}),e.mouseup(function(){$(document).unbind("mousemove")})}})},dateToWords=function(e){if("0000-00-00"==e)return"N/A";var a=new Array("January","February","March","April","May","June","July","August","September","October","November","December"),t=e.split("-"),n=t[0],o=t[1],i=t[2];return a[parseInt(o)-1]+" "+i+", "+n};